<h1 id="post-title">Tweaking the configuration</h1>
<span>Last update: <time id="post-date">2019-10-12</time></span>
<p>
For simplicity, soupault docs (and these posts) often talk about directories and behaviour
as if they are set in stone, but in fact those are just defaults. In reality, most options
are configurable and you can change them if you want to. Today we&apos;ll walk through the options
from the default config generated by <code>soupault --init</code> and discuss what they do and
why you may want to change them.
</p>
</p>
For example, I often say that page content files are stored in <code>site/</code> and generated pages
go to <code>build/</code>. Those are default values for <code>site_dir</code> and <code>build_dir</code>.
If you are migrating from a hand-cranked workflow or another website generator, changing the directory
options to match the setup you already have can save you a bit of time.
</p>
<p>
Thanks to those defaults, soupault can function without a config file at all. It will show a warning about
missing config file, but it will work. The main reason <kbd>soupault --init</kbd> creates a default config
is to tell you what the defaults are and make it easier to change them. Here is the default config from 1.3.2:
</p>
<pre class="language-toml">
[settings]
  strict = true
  verbose = false

  build_dir = "build"
  site_dir = "site"

  default_template = "templates/main.html"
  content_selector = "body"

  doctype = "<!DOCTYPE html>"

  clean_urls = true

  page_file_extensions = ["htm", "html", "md", "rst", "adoc"]
</pre>
<h2>Strict and verbose</h2>
<p>
The <code>verbose</code> option makes soupault tell you about everything it&apos;s doing. When that option is undefined,
soupault will only print warnings and errors, so successful website build is completely silent. There are two ways
to make it more chatty: use <code>verbose = true</code> in the config for a permanent option, or run <kbd>soupault --verbose</kbd>
for a one time behaviour change.
</p>
<p>
The <code>strict</code> option defines whether soupault will stop on page processing errors or not. Trying to include a file that doesn&apos;t exist
is a typical error of this kind. Suppose you want to include a footer from <code>templates/footer.html</code> in every page, and you add this to the config
but forget to create the <code>templates/footer.html</code> file:
</p>
<pre class="language-toml">
[widgets.footer]
  widget = "include"

  # file doesn't exist yet
  file = "templates/footer.html"
  selector = "div#footer"
</pre>
<p>
If you have <code>strict = true</code> in your config, then build will fail with <code>[ERROR] Could not process page &hellip;: templates/footer.html: No such file or directory</code>.
If you have <code>strict = false</code>, it will just show a non-existent file warning and produce pages without a footer.
</p>
<h2>Site and build dirs</h2>
<p>
As said above, they define where page content files are stores and where generated pages go. You can use either relative or
absolute paths there: for example, if you run soupault right on your web server, you can use <code>build_dir = "/var/www/mysite"</code>
for instant deploys, or if you have your Neocities site mounted as a WebDAV directory, you can point soupault to it for the same instant
deploy effect.
</p>
<h2>Default template and content selector</h2>
<p>
The <code>default_template</code> option defines the empty page file where your page contents are inserted. The <code>templates/</code>
directory has no special significance, you can as well use <code>default_template = "empty.html"</code> to store it in the top level
site directory. I just thought most people will want to keep reusable files in one location and that <code>templates/</code> is a sensible
name for it.
</p>
<p>
The <code>content_selector</code> option defines where page content is inserted. By default it&apos;s inserted in (or appended to) the HTML body.
If you have a designated place for the page content, set it to a CSS selector that identified that element, like <code>content_selector = "div#content"</code>.
</p>
<h2>Doctype</h2>
<p>
Soupault will remove the original <code>&lt;!DOCTYPE &hellip;&gt;</code> from your pages. This is a limitation of the HTML processing library it uses,
which I may fix in the future. For now, you can&apos;t use different doctype for different pages, but you can specify a doctype globally using the
<code>doctype</code> option. It defaults to the HTML5 doctype, which should be good for most newly written pages.
</p>
<h2>Clean URLs</h2>
<p>
Like the <a href="/howto/#clean-urls">HOWTO</a> already says, this option allows you to choose between &ldquo;clean&rdquo; and &ldquo;traditional&rdquo;
URLs, i.e. between <code>site/about.html</code> becoming <code>build/about/index.html</code> or <code>build/about.html</code>.
If you already have a website using the traditional structure, you should enable it to avoid breaking the links to your existing pages.
</p>
<h2>Page file extensions</h2>
<p>
The <code>page_file_extensions</code> options defines which files will be processed as pages, that is, parsed and inserted into the empty page
defined by <code>default_template</code>. All other files will be copied to the build directory unchanged, so that you can store your images
and other non-page files together with page in the site directory. This should also make migrating from hand-managed websites easier.
</p>
<p>
Early soupault versions used to consider everything inside the site directory a page, which is consistent, but it&apos;s a foolish kind of consistency
that is completely against the <a href="https://en.wikipedia.org/wiki/Principle_of_least_astonishment">principle of least surprise</a>.
Placing a GIF picture in the site directory and ending up with lots of garbage inside your HTML would be quite surprising to webmasters,
so I went for an explicit list of file types to process and make into pages.
</p>
<p>
Note that there is no built-in support for Markdown, reStructuredText, or AsciiDoc, so by default your pages in those formats will be treated as
plain text. If you want to use those formats, should specify an HTML converter of your choice for them, see the <a href="/howto/#preprocessors">HOWTO</a>.
</p>
